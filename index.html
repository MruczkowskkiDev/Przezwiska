<!DOCTYPE html> 
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lista uczniów</title>
    <style>
        /* Twój styl CSS pozostaje bez zmian */
    </style>
</head>
<body>
    <button class="login-btn" onclick="showLogin()">Logowanie</button>

    <div class="login-popup" id="loginPopup">
        <p>Podaj hasło:</p>
        <input type="password" id="passwordInput" onkeypress="checkLogin(event)">
    </div>

    <h2>Lista uczniów</h2>
    <table>
        <!-- Twoje wiersze tabeli pozostają bez zmian -->
    </table>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.1.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.1.1/firebase-database.js"></script>

    <script>
        // Konfiguracja Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyD2DELS96WbUb4DmtuMo54OpOPkzlnCkS0",
            authDomain: "zapis-przezwisk.firebaseapp.com",
            databaseURL: "https://zapis-przezwisk-default-rtdb.europe-west1.firebasedatabase.app",
            projectId: "zapis-przezwisk",
            storageBucket: "zapis-przezwisk.firebasestorage.app",
            messagingSenderId: "742731426346",
            appId: "1:742731426346:web:df66e6a72538e5cdcb3153",
            measurementId: "G-978RVLP5VS"
        };

        // Inicjalizacja Firebase
        const app = firebase.initializeApp(firebaseConfig);
        const database = firebase.database(app);

        let loggedInUser = null;

        function showLogin() {
            document.getElementById("loginPopup").style.display = "block";
            document.getElementById("passwordInput").focus();
        }

        function checkLogin(event) {
            if (event.key === "Enter") {
                const password = document.getElementById("passwordInput").value;
                const validUsers = {
                    "abhaha123": "Leon Babicz",
                    "mruczek": "Michał Ciepiela",
                    "lubieaudis3": "Jan Tokarz",
                    "rypka14!": "Gosia",
                    "pulpecik06": "Zuzia Kosiba",
                    "kocham_energylandie": "Weronika Roś",
                    "twojastara2137": "Maks Czaja",
                    "gawron@3": "Szymon Cabaj",
                    "wikikapiek490": "Wiktoria Węglarz",
                    "sigmaboy": "Ania Jezior",
                    "kotki2": "Paulina Kliś",
                    "342": "Ania Bochenek",
                    "optimusprime000": "Szymon Gorczyca",
                    "leonmadrame": "Leon Wilczyński"
                };

                if (validUsers[password]) {
                    loggedInUser = password;
                    alert("Zalogowano jako: " + validUsers[password]);
                    enableEditing(password);
                    document.getElementById("loginPopup").style.display = "none";
                } else {
                    alert("Błędne hasło!");
                }
            }
        }

        function enableEditing(password) {
            let cells = document.querySelectorAll(".nickname");
            cells.forEach(cell => {
                if (cell.dataset.user === password) {
                    cell.contentEditable = "true";
                    cell.style.backgroundColor = "#e0e0e0";
                    cell.addEventListener("keypress", function(event) {
                        if (event.key === "Enter") {
                            event.preventDefault();
                            this.blur();
                            saveData(cell.dataset.user, this.textContent);
                        }
                    });
                }
            });
        }

        function saveData(userId, nickname) {
            // Zapisz przezwisko w Firebase
            const nicknameRef = database.ref('nicknames/' + userId);
            nicknameRef.set(nickname, (error) => {
                if (error) {
                    alert("Błąd zapisu: " + error.message);
                } else {
                    alert("Przezwisko zostało zapisane!");
                }
            });
        }
    </script>
</body>
</html>
