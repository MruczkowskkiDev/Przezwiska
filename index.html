<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lista uczniów</title>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js"></script>
</head>
<body>

    <button onclick="showLogin()">Logowanie</button>
    <div id="loginPopup" style="display:none;">
        <input type="password" id="passwordInput" onkeypress="checkLogin(event)">
    </div>

    <h2>Lista uczniów</h2>
    <table border="1">
        <tr><th>Imię</th><th>Nazwisko</th><th>Przezwisko</th></tr>
        <tr><td>Leon</td><td>Babicz</td><td class="nickname" data-user="abhaha123"></td></tr>
        <tr><td>Ania</td><td>Bochenek</td><td class="nickname" data-user="342"></td></tr>
        <tr><td>Michał</td><td>Ciepiela</td><td class="nickname" data-user="mruczek"></td></tr>
    </table>

    <script>
        const firebaseConfig = {
            apiKey: "TWOJE_API_KEY",
            authDomain: "lista-przezwisk.firebaseapp.com",
            databaseURL: "https://lista-przezwisk-default-rtdb.europe-west1.firebasedatabase.app",
            projectId: "lista-przezwisk",
            storageBucket: "lista-przezwisk.appspot.com",
            messagingSenderId: "TWOJE_MESSAGING_ID",
            appId: "TWOJE_APP_ID"
        };

        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();
        let loggedInUser = null;

        function loadNicknames() {
            db.ref("nicknames").once("value", (snapshot) => {
                let data = snapshot.val();
                document.querySelectorAll(".nickname").forEach(td => {
                    let user = td.dataset.user;
                    td.textContent = data && data[user] ? data[user] : "";
                });
            });
        }

        function showLogin() {
            document.getElementById("loginPopup").style.display = "block";
            document.getElementById("passwordInput").focus();
        }

        function checkLogin(event) {
            if (event.key === "Enter") {
                const password = document.getElementById("passwordInput").value;
                const validUsers = {
                    "abhaha123": "Leon Babicz",
                    "mruczek": "Michał Ciepiela",
                    "342": "Ania Bochenek"
                };

                if (validUsers[password]) {
                    loggedInUser = password;
                    alert("Zalogowano jako: " + validUsers[password]);
                    enableEditing(password);
                    document.getElementById("loginPopup").style.display = "none";
                } else {
                    alert("Błędne hasło!");
                }
            }
        }

        function enableEditing(password) {
            let cells = document.querySelectorAll(".nickname");
            cells.forEach(cell => {
                if (cell.dataset.user === password) {
                    cell.contentEditable = "true";
                    cell.style.backgroundColor = "#e0e0e0";
                    cell.addEventListener("keypress", function(event) {
                        if (event.key === "Enter") {
                            event.preventDefault();
                            saveData(password, this.textContent);
                            this.blur();
                        }
                    });
                }
            });
        }

        function saveData(user, nickname) {
            db.ref("nicknames/" + user).set(nickname);
            alert("Przezwisko zapisane!");
        }

        loadNicknames();
    </script>

</body>
</html>


        loadNicknames();
    </script>

</body>
</html>
